<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•è»¢é€ã‚·ã‚¹ãƒ†ãƒ </title>
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'stationery-paper': '#fcfaf2',
            'stationery-sage': '#8fae91',
            'stationery-blue': '#708090',
            'stationery-terracotta': '#c66b5d',
            'stationery-gray': '#e5e7eb',
          },
          fontFamily: {
            rounded: ['"M PLUS Rounded 1c"', 'sans-serif'],
            serif: ['"Noto Serif JP"', 'serif'],
          }
        }
      }
    }
  </script>
  <style>
    body {
      background-color: #f3f4f6;
      background-image: radial-gradient(#d1d5db 1px, transparent 1px);
      background-size: 20px 20px; /* ãƒ‰ãƒƒãƒˆæ–¹çœ¼ */
    }
    .custom-shadow {
      box-shadow: 4px 4px 0px 0px rgba(112, 128, 144, 0.2);
    }
    .loading-spinner {
      border-top-color: #8fae91;
      animation: spinner 0.6s linear infinite;
    }
    @keyframes spinner {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    /* ä»˜ç®‹é¢¨ã‚¹ã‚¿ã‚¤ãƒ« */
    .sticky-note {
      background-color: #fef3c7;
      box-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      transform: rotate(-1deg);
    }
    /* ã‚¯ãƒªãƒƒãƒ—é¢¨è£…é£¾ */
    .clip-decoration {
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 40px;
      background-color: #a0aec0;
      border-radius: 20px;
      z-index: 20;
    }
  </style>
</head>
<body class="font-rounded text-slate-700 min-h-screen">
  <div id="root"></div>

  <!-- React & Babel -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script type="text/babel">
    const { useState, useEffect, useCallback } = React;

    // --- Mock for Development ---
    if (typeof google === 'undefined') {
      window.google = {
        script: {
          run: {
            withSuccessHandler: function(onSuccess) {
              this.onSuccess = onSuccess;
              return this;
            },
            withFailureHandler: function(onFailure) {
              this.onFailure = onFailure;
              return this;
            },
            getAppConfig: function() {
              setTimeout(() => {
                if (this.onSuccess) this.onSuccess({
                  folderPairs: [
                    {source: 'src-1', target: 'tgt-1'}, 
                    {source: '', target: ''}
                  ],
                  isAutoSyncEnabled: false,
                  syncFrequency: 'hourly'
                });
              }, 800);
            },
            getSyncLogs: function() {
              setTimeout(() => {
                if (this.onSuccess) this.onSuccess([]);
              }, 600);
            },
            saveAppConfig: function(config) {
               setTimeout(() => {
                console.log("Config Saved (Mock):", config);
                if (this.onSuccess) this.onSuccess({ success: true });
              }, 1000);
            },
            runSyncProcess: function() {
              setTimeout(() => {
                if (this.onSuccess) this.onSuccess({ success: true, message: 'ã€UIç¢ºèªãƒ¢ãƒ¼ãƒ‰ã€‘å®Ÿéš›ã®è»¢é€ã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚' });
              }, 2000);
            },
            toggleAutoSync: function(enable, frequency) {
              setTimeout(() => {
                if (this.onSuccess) this.onSuccess({ enabled: enable, frequency: frequency, message: `è‡ªå‹•è»¢é€ã‚’${enable ? 'ON' : 'OFF'} (${frequency}) ã«ã—ã¾ã—ãŸï¼ˆMockï¼‰` });
              }, 1000);
            }
          }
        }
      };
    }

    // --- Components ---

    const Toast = ({ message, type, onClose }) => (
      <div className={`fixed bottom-5 right-5 px-6 py-3 rounded-lg shadow-lg text-white z-50 flex items-center gap-2 transform transition-all duration-300 ${type === 'error' ? 'bg-stationery-terracotta' : 'bg-stationery-sage'}`}>
        <span>{message}</span>
        <button onClick={onClose} className="ml-2 font-bold hover:text-gray-200">Ã—</button>
      </div>
    );

    const Modal = ({ isOpen, title, children, onConfirm, onCancel, confirmText = "å®Ÿè¡Œã™ã‚‹", cancelText = "ã‚„ã‚ã‚‹" }) => {
      if (!isOpen) return null;
      return (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-40 p-4">
          <div className="bg-stationery-paper w-full max-w-md rounded-xl p-8 border-2 border-stationery-blue custom-shadow relative">
            <h3 className="text-xl font-bold mb-4 text-stationery-blue flex items-center gap-2">
              <span className="text-2xl">ğŸ“¤</span> {title}
            </h3>
            <div className="mb-8 font-serif text-lg leading-relaxed">{children}</div>
            <div className="flex justify-end gap-4">
              <button onClick={onCancel} className="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors font-bold text-sm text-gray-600">{cancelText}</button>
              <button onClick={onConfirm} className="px-4 py-2 rounded-lg bg-stationery-terracotta text-white hover:opacity-90 transition-opacity font-bold text-sm shadow-md">{confirmText}</button>
            </div>
          </div>
        </div>
      );
    };

    const LoadingOverlay = () => (
      <div className="fixed inset-0 bg-white/70 backdrop-blur-sm flex flex-col items-center justify-center z-[100]">
        <div className="loading-spinner w-12 h-12 border-4 border-stationery-gray rounded-full mb-4"></div>
        <p className="text-stationery-blue font-bold animate-pulse">ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ä¸­...</p>
      </div>
    );

    const SyncLogItem = ({ log }) => {
      const date = new Date(log.date);
      const dateStr = `${date.getMonth() + 1}/${date.getDate()} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
      
      let icon = 'ğŸ“„';
      let colorClass = 'text-gray-600';
      if (log.type === 'CREATE') { icon = 'ğŸ†•'; colorClass = 'text-stationery-sage font-bold'; }
      if (log.type === 'UPDATE') { icon = 'ğŸ”„'; colorClass = 'text-stationery-terracotta font-bold'; }
      if (log.type === 'ERROR')  { icon = 'âš ï¸'; colorClass = 'text-red-600 font-bold'; }

      return (
        <li className="flex items-start gap-3 py-3 border-b border-dashed border-gray-300 last:border-0 group hover:bg-gray-50 transition-colors px-2 rounded">
          <span className="text-xs text-gray-400 whitespace-nowrap mt-1 font-mono">{dateStr}</span>
          <div className="flex-1">
            <div className={`flex items-center gap-2 ${colorClass} text-sm`}>
              <span>{icon}</span>
              <span>{log.type === 'CREATE' ? 'æ–°è¦è»¢é€' : log.type === 'UPDATE' ? 'æ›´æ–°ãƒ»ä¸Šæ›¸ã' : 'ã‚¨ãƒ©ãƒ¼'}</span>
            </div>
            <p className="text-base font-serif mt-1 text-gray-800">{log.fileName}</p>
            {log.message && <p className="text-xs text-gray-500 mt-1">{log.message}</p>}
          </div>
        </li>
      );
    };

    // --- Main App ---

    function App() {
      const [isLoading, setIsLoading] = useState(false);
      const [toast, setToast] = useState(null);
      const [view, setView] = useState('user'); 
      const [isModalOpen, setIsModalOpen] = useState(false);
      
      // Data
      const [config, setConfig] = useState({ 
        folderPairs: [], // [{source: '', target: ''}]
        isAutoSyncEnabled: false,
        syncFrequency: 'hourly'
      });
      const [syncLogs, setSyncLogs] = useState([]);

      useEffect(() => {
        loadData();
        const timer = setInterval(() => {
          google.script.run
            .withSuccessHandler((logs) => {
              setSyncLogs(logs);
            })
            .withFailureHandler(err => console.error("Polling error:", err))
            .getSyncLogs();
        }, 30000);
        return () => clearInterval(timer);
      }, []);

      const showToast = (message, type = 'success') => {
        setToast({ message, type });
        setTimeout(() => setToast(null), 3000);
      };

      const loadData = () => {
        setIsLoading(true);
        const pConfig = new Promise((resolve, reject) => {
          google.script.run.withSuccessHandler(resolve).withFailureHandler(reject).getAppConfig();
        });
        const pLogs = new Promise((resolve, reject) => {
          google.script.run.withSuccessHandler(resolve).withFailureHandler(reject).getSyncLogs();
        });

        Promise.all([pConfig, pLogs])
          .then(([conf, logs]) => {
            // ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æ­£è¦åŒ–
            let pairs = conf.folderPairs || [];
            if (pairs.length === 0) pairs = [{source: '', target: ''}]; // åˆæœŸ1ä»¶

            setConfig({
              ...conf,
              folderPairs: pairs
            });
            setSyncLogs(logs);
          })
          .catch(err => {
            console.error(err);
            showToast("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ: " + err.message, "error");
          })
          .finally(() => {
            setIsLoading(false);
          });
      };

      const handleSync = () => {
        setIsModalOpen(false);
        setIsLoading(true);
        google.script.run
          .withSuccessHandler((res) => {
            setIsLoading(false);
            showToast(res.message);
            loadData();
          })
          .withFailureHandler((err) => {
            setIsLoading(false);
            showToast("è»¢é€ã‚¨ãƒ©ãƒ¼: " + err.message, "error");
          })
          .runSyncProcess();
      };

      const saveConfig = () => {
        setIsLoading(true);
        // ç©ºã®è¨­å®šã‚’é™¤å»ã—ã¦ä¿å­˜
        const cleanPairs = config.folderPairs.filter(p => p.source.trim() !== '' || p.target.trim() !== '');
        
        // UIä¸Šã‚‚æ›´æ–°
        const newConfig = { ...config, folderPairs: cleanPairs.length > 0 ? cleanPairs : [{source:'', target:''}] };
        setConfig(newConfig);

        google.script.run
          .withSuccessHandler(() => {
            setIsLoading(false);
            showToast("è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ");
          })
          .withFailureHandler(err => {
             setIsLoading(false);
             showToast("ä¿å­˜ã‚¨ãƒ©ãƒ¼: " + err.message, "error");
          })
          .saveAppConfig(newConfig);
      };

      const toggleAutoSync = () => {
        setIsLoading(true);
        const newState = !config.isAutoSyncEnabled;
        google.script.run
          .withSuccessHandler((res) => {
            setIsLoading(false);
            setConfig(prev => ({ 
              ...prev, 
              isAutoSyncEnabled: res.enabled,
              syncFrequency: res.frequency 
            }));
            showToast(res.message);
          })
          .withFailureHandler(err => {
             setIsLoading(false);
             showToast("è¨­å®šå¤‰æ›´ã«å¤±æ•—: " + err.message, "error");
          })
          .toggleAutoSync(newState, config.syncFrequency);
      };

      // Folder Pair Handlers
      const addPair = () => {
        if (config.folderPairs.length >= 5) {
          showToast("è¨­å®šã§ãã‚‹ã®ã¯5ä»¶ã¾ã§ã§ã™", "error");
          return;
        }
        setConfig({
          ...config,
          folderPairs: [...config.folderPairs, {source: '', target: ''}]
        });
      };

      const removePair = (index) => {
        const newPairs = config.folderPairs.filter((_, i) => i !== index);
        // å…¨å‰Šé™¤ã¯ã§ããªã„ã‚ˆã†ã«ï¼ˆæœ€ä½1ä»¶ï¼‰
        if (newPairs.length === 0) newPairs.push({source: '', target: ''});
        setConfig({ ...config, folderPairs: newPairs });
      };

      const updatePair = (index, field, value) => {
        const newPairs = [...config.folderPairs];
        newPairs[index] = { ...newPairs[index], [field]: value };
        setConfig({ ...config, folderPairs: newPairs });
      };

      // Helper
      const getFrequencyText = (freq) => {
        if (freq === 'daily') return 'æ¯æ—¥ (æ·±å¤œ)';
        if (freq === 'weekly') return 'æ¯é€± (æœˆæ›œ)';
        return '1æ™‚é–“ã”ã¨';
      };

      // --- Render Views ---

      const renderUserView = () => (
        <div className="space-y-6 animate-fade-in">
          <div className="bg-stationery-paper border-2 border-stationery-blue rounded-xl p-6 custom-shadow relative overflow-hidden">
            <div className="absolute top-0 right-0 p-4 opacity-10 pointer-events-none">
              <i data-lucide="folder-output" className="w-32 h-32"></i>
            </div>
            
            <div className="flex items-center gap-3 mb-6 relative z-10">
              <div className="bg-stationery-sage text-white p-2 rounded-lg shadow-sm">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"/><polyline points="14 2 14 8 20 8"/><path d="M2 15h10"/><path d="m9 18 3-3-3-3"/></svg>
              </div>
              <div>
                <h2 className="text-xl font-bold text-stationery-blue">ãƒ•ã‚¡ã‚¤ãƒ«è»¢é€ãƒ­ã‚°</h2>
                <p className="text-xs text-gray-500">è»¢é€å±¥æ­´ï¼ˆæœ€æ–°50ä»¶ï¼‰</p>
              </div>
            </div>

            <div className="font-serif bg-white p-4 rounded-lg border border-gray-200 shadow-inner h-72 overflow-y-auto">
              {syncLogs.length === 0 ? (
                <div className="flex flex-col items-center justify-center h-full text-gray-400">
                  <span className="text-4xl mb-2">ğŸ“­</span>
                  <p>ã¾ã è»¢é€ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚ã‚Šã¾ã›ã‚“</p>
                </div>
              ) : (
                <ul className="space-y-1">
                  {syncLogs.map((log, i) => <SyncLogItem key={i} log={log} />)}
                </ul>
              )}
            </div>
            
            <div className="mt-4 flex justify-between items-center text-sm text-gray-500 border-t border-gray-200 pt-2">
              <span>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: {config.isAutoSyncEnabled ? `è‡ªå‹•è»¢é€ ON (${getFrequencyText(config.syncFrequency)})` : 'æ‰‹å‹•è»¢é€ãƒ¢ãƒ¼ãƒ‰'}</span>
              <span>æœ€çµ‚ç¢ºèª: {new Date().toLocaleTimeString()}</span>
            </div>
          </div>
          
          {/* èª¬æ˜æ›¸ã */}
          <div className="text-center text-xs text-gray-400 mt-8">
            <p>â€»è¤‡æ•°ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒšã‚¢ã‚’è¨­å®šã—ã¦ã„ã‚‹å ´åˆã€ã™ã¹ã¦ã®ãƒšã‚¢ãŒé †ç•ªã«å‡¦ç†ã•ã‚Œã¾ã™ã€‚</p>
          </div>
        </div>
      );

      const renderAdminView = () => {
        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ãƒ–ãƒ­ãƒƒã‚¯ã‚’å‰Šé™¤ã—ã¾ã—ãŸ

        return (
          <div className="space-y-8 animate-fade-in">
            {/* Folder Settings List */}
            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
              <h3 className="font-bold text-lg mb-4 flex items-center justify-between text-stationery-blue border-b pb-2">
                <span className="flex items-center gap-2"><span>âš™ï¸</span> è»¢é€ãƒ•ã‚©ãƒ«ãƒ€è¨­å®š ({config.folderPairs.length}/5)</span>
                <button 
                  onClick={addPair}
                  disabled={config.folderPairs.length >= 5}
                  className="text-xs bg-stationery-sage text-white px-3 py-1 rounded hover:opacity-80 disabled:bg-gray-300 disabled:cursor-not-allowed"
                >
                  ï¼‹ ãƒšã‚¢ã‚’è¿½åŠ 
                </button>
              </h3>
              
              <div className="space-y-6">
                {config.folderPairs.map((pair, index) => (
                  <div key={index} className="relative bg-gray-50 p-4 rounded-lg border border-gray-200 group hover:border-stationery-blue/50 transition-colors">
                    <div className="absolute -top-3 left-3 bg-white px-2 text-xs font-bold text-gray-400 border rounded">
                      è¨­å®š #{index + 1}
                    </div>
                    {config.folderPairs.length > 1 && (
                      <button 
                        onClick={() => removePair(index)}
                        className="absolute top-2 right-2 text-gray-400 hover:text-red-500"
                        title="ã“ã®è¨­å®šã‚’å‰Šé™¤"
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                      </button>
                    )}
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                      <div>
                        <label className="block text-xs font-bold text-gray-500 mb-1 flex items-center gap-1">
                          <span className="w-2 h-2 rounded-full bg-gray-400"></span> å…ƒ (Source) ID
                        </label>
                        <input 
                          type="text" 
                          value={pair.source}
                          onChange={(e) => updatePair(index, 'source', e.target.value)}
                          className="w-full p-2 border rounded bg-white font-mono text-sm focus:ring-1 focus:ring-stationery-sage outline-none"
                          placeholder="è»¢é€å…ƒãƒ•ã‚©ãƒ«ãƒ€ID"
                        />
                      </div>
                      <div>
                        <label className="block text-xs font-bold text-gray-500 mb-1 flex items-center gap-1">
                          <span className="w-2 h-2 rounded-full bg-stationery-terracotta"></span> å…ˆ (Target) ID
                        </label>
                        <input 
                          type="text" 
                          value={pair.target}
                          onChange={(e) => updatePair(index, 'target', e.target.value)}
                          className="w-full p-2 border rounded bg-white font-mono text-sm focus:ring-1 focus:ring-stationery-terracotta outline-none"
                          placeholder="è»¢é€å…ˆãƒ•ã‚©ãƒ«ãƒ€ID"
                        />
                      </div>
                    </div>
                  </div>
                ))}

                <div className="flex justify-end pt-2">
                  <button onClick={saveConfig} className="bg-stationery-blue text-white px-6 py-2 rounded-lg hover:opacity-90 text-sm font-bold shadow-md">
                    å…¨è¨­å®šã‚’ä¿å­˜
                  </button>
                </div>
              </div>
            </div>

            {/* Actions */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div className="bg-stationery-sage/10 rounded-xl p-6 border border-stationery-sage/30">
                <h3 className="font-bold text-stationery-sage mb-2 flex items-center gap-2">
                  <i data-lucide="play-circle" className="w-5 h-5"></i> æ‰‹å‹•è»¢é€
                </h3>
                <p className="text-sm text-gray-600 mb-4 h-10">è¨­å®šã•ã‚ŒãŸã™ã¹ã¦ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒšã‚¢ã§åŒæœŸã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>
                <button 
                  onClick={() => setIsModalOpen(true)}
                  className="w-full bg-stationery-sage text-white py-3 rounded-lg font-bold shadow-md hover:translate-y-0.5 transition-transform"
                >
                  ä¸€æ‹¬è»¢é€ã‚’å®Ÿè¡Œ
                </button>
              </div>

              <div className="bg-stationery-terracotta/10 rounded-xl p-6 border border-stationery-terracotta/30 relative">
                <h3 className="font-bold text-stationery-terracotta mb-2 flex items-center gap-2">
                  <i data-lucide="clock" className="w-5 h-5"></i> è‡ªå‹•è»¢é€è¨­å®š
                </h3>
                
                <div className="mb-4">
                   <p className="text-sm text-gray-600 mb-2">æ›´æ–°é »åº¦ã‚’é¸æŠ:</p>
                   <select 
                     value={config.syncFrequency} 
                     onChange={(e) => setConfig({...config, syncFrequency: e.target.value})}
                     className="w-full p-2 border border-gray-300 rounded bg-white text-sm focus:ring-2 focus:ring-stationery-terracotta outline-none"
                     disabled={config.isAutoSyncEnabled} 
                   >
                     <option value="hourly">1æ™‚é–“ã”ã¨</option>
                     <option value="daily">æ¯æ—¥ï¼ˆæ·±å¤œï¼‰</option>
                     <option value="weekly">æ¯é€±ï¼ˆæœˆæ›œ æœï¼‰</option>
                   </select>
                   {config.isAutoSyncEnabled && <p className="text-xs text-gray-400 mt-1">â€»å¤‰æ›´ã™ã‚‹ã«ã¯ä¸€åº¦åœæ­¢ã—ã¦ãã ã•ã„</p>}
                </div>

                <p className="text-sm text-gray-600 mb-4">
                  çŠ¶æ…‹: <span className={`font-bold ${config.isAutoSyncEnabled ? 'text-green-600' : 'text-gray-500'}`}>
                    {config.isAutoSyncEnabled ? 'ç¨¼åƒä¸­' : 'åœæ­¢ä¸­'}
                  </span>
                </p>

                <button 
                  onClick={toggleAutoSync}
                  className={`w-full py-3 rounded-lg font-bold shadow-md transition-colors ${config.isAutoSyncEnabled ? 'bg-white text-stationery-terracotta border border-stationery-terracotta' : 'bg-stationery-terracotta text-white'}`}
                >
                  {config.isAutoSyncEnabled ? 'è‡ªå‹•è»¢é€ã‚’åœæ­¢ã™ã‚‹' : 'ã“ã®é »åº¦ã§é–‹å§‹ã™ã‚‹'}
                </button>
              </div>
            </div>
          </div>
        );
      };

      return (
        <div className="max-w-4xl mx-auto p-4 md:p-8 pb-20">
          {isLoading && <LoadingOverlay />}
          {toast && <Toast message={toast.message} type={toast.type} onClose={() => setToast(null)} />}
          
          <Modal 
            isOpen={isModalOpen} 
            title="æ‰‹å‹•è»¢é€ã‚’å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ" 
            onConfirm={handleSync} 
            onCancel={() => setIsModalOpen(false)}
          >
            <p>è¨­å®šã•ã‚ŒãŸã™ã¹ã¦ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒšã‚¢ ({config.folderPairs.filter(p => p.source && p.target).length}ä»¶) ã«å¯¾ã—ã¦è»¢é€å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚</p>
            <div className="mt-4 bg-yellow-50 p-4 rounded border border-yellow-200 text-sm">
              <p className="font-bold text-yellow-800 mb-1">âš ï¸ ç¢ºèªäº‹é …</p>
              <ul className="list-disc list-inside text-yellow-700">
                <li>å…±æœ‰ãƒ•ã‚©ãƒ«ãƒ€å†…ã®åŒåãƒ•ã‚¡ã‚¤ãƒ«ã¯<strong>ä¸Šæ›¸ã</strong>ã•ã‚Œã¾ã™ã€‚</li>
                <li>ä»¶æ•°ãŒå¤šã„ã¨æ™‚é–“ãŒã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</li>
              </ul>
            </div>
          </Modal>

          <header className="flex flex-col md:flex-row justify-between items-center mb-8 border-b-2 border-stationery-blue pb-4 gap-4">
            <div className="text-center md:text-left">
              <h1 className="text-2xl md:text-3xl font-bold text-stationery-blue flex items-center justify-center md:justify-start gap-2">
                <span className="text-4xl">ğŸ–‡ï¸</span> ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•è»¢é€ã‚·ã‚¹ãƒ†ãƒ 
              </h1>
              <p className="text-sm text-gray-500 mt-1 font-serif">åŸæœ¬ â” å…±æœ‰ãƒ•ã‚©ãƒ«ãƒ€ã¸ã®ãƒ•ã‚¡ã‚¤ãƒ«é…å¸ƒãƒ»åŒæœŸ</p>
            </div>
            <button 
              onClick={() => setView(view === 'user' ? 'admin' : 'user')}
              className="px-4 py-2 bg-stationery-gray rounded-full hover:bg-gray-300 transition-colors text-sm font-bold flex items-center gap-2"
            >
              {view === 'user' ? 'âš™ï¸ è¨­å®šç”»é¢ã¸' : 'ğŸ‘¤ ãƒ­ã‚°ç”»é¢ã¸'}
            </button>
          </header>

          <main>
            {view === 'user' ? renderUserView() : renderAdminView()}
          </main>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
